## 운영체제에서 Synchronization (동기화)란

- 프로세스 또는 스레드들이 수행되는 시점을 조절하는 것이다.
- multi-threaded program 되었던, multi-process program 되었던간에 어떤 shared data를 접근하는 경우 그들의 순서를 조절하는 것이다.

# Race Condition (경쟁 상태)

- 두 개 이상의 concurrent한 스레드들이 공유된 자원에 접근하려고 할 때 동기화 메커니즘 없이 접근하려는 상황이다. (두 개의 스레드가 하나의 자원을 놓고 서로 사용하려고 경쟁하는 상황)

- 공유 자원에 대해 여러 프로세스가 동시에 접근할 때, 실행 순서를 조절해주지 않으면 결과값에 영향을 줄 수 있다.





## Race Condition이 발생하는 경우

1. 커널 작업 수행 중 인터럽트 발생
   - 문제점: 커널 모드에서 데이터를 로드하여 작업을 수행하다가 인터럽트가 발생하여 같은 데이터를 조작하는 경우
   - 해결법: 커널모드에서 작업을 수행하는 동안, 인터럽트를 disable 시켜 CPU 제어권을 가져가지 못하도록 한다.
2. 프로세스가 System Call을 하여 커널 모드로 진입하여 작업을 수행하는 도중 문맥 교환이 발생할 때
   - 문제점: 프로세스 1이 커널모드에서 데이터를 조작하는 도중, 시간이 초과되어 CPU 제어권이 프로세스 2로 넘어가 같은 데이터를 조작하는 경우 (프로세스2가 작업에 반영되지 않음)
   - 해결법: 프로세스가 커널모드에서 작업을 하는 경우 시간이 초과되어도 CPU 제어권이 다른 프로세스에게 넘어가지 않도록 함
3. 멀티 프로세서 환경에서 공유 메모리 내의 커널 데이터에 접근할 때
   - 문제점: 멀티 프로세서 환경에서 2개의 CPU가 동시에 커널 내부의 공유 데이터에 접근하여 조작하는 경우
   - 해결법: 커널 내부에 있는 각 공유 데이터에 접근할 때 마다, 그 데이터에 대한 lock/unlock을 하는 방법